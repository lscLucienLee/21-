<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>浏览查询界面</title>
  <link rel="stylesheet" href="../static/plugins/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../static/plugins/font-awesome-4.7.0/css/font-awesome.css">
  <style>
     .navbar{
        border-radius:0;
        }

     .table{
       width:1200px;

     }
     #main{
           width: 80%;
            margin: 0 auto;
     }
  </style>
</head>
<body>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">

          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                  data-target="#bs-example-navbar-collapse-9" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-brand" >平行语料库管理系统</div>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-9">
          <ul class="nav navbar-nav">
          </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="#">主页</a></li>
        <li><a href="#">登出</a></li>
       <li><a href="#">返回上一步</a></li>
      </ul>
        </div></div>
 </nav>
 <h3 style="margin-left:20px;color: rgb(0, 0, 0);font-family: Inter;font-size: 30px;font-weight: 800;">
    当前语料库：陈怀宇
</h3>
<div style="width: 1100px;height:35px;margin-left:auto;margin-right: auto;margin-top:40px">
<a href="/add/" ><button type="button" class="btn btn-default " style="width: 150px;background-color:#DCDCDC;margin-left:28px;position: fixed;left:128px  ">添加平行语料</button></a>
</div>


<div class="container" style="margin-left: 139px;">
  <div >
  <div style="width:500px">
    <div class="input-group">
      <input type="text" class="form-control"  placeholder="请输入要查询的关键词" style="width:250px ">
      <div class="input-group-btn" style="float: left">
        <button class="btn btn-default" ><i class="fa fa-search" aria-hidden="true" ></i></button>
      </div>
    </div>
  </div>
  </div>
</div>





<div id="main" style="position: absolute;left:155px">
<table class="table table-bordered">
            <tbody>
                <tr>
                  <th>#</th>
                    <th style="width:400px">原文</th>
          <th style="width: 400px">译文</th>
          <th style="width: 140px">操作</th>
                </tr>
            </tbody>
        </table>


 <nav aria-label="Page navigation" style="margin-top:-10px;margin-left: 480px">
            <ul class="pagination">
                <li id="pre">
                    <a href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>

            </ul>
        </nav>
</div>




   </body>
 <script src="../static/js/jQuery.js"></script>
        <script src="../static/plugins/bootstrap/js/bootstrap.js"></script>

<script>
	function openwindow(){
		var r = confirm("确认删除吗？")
		if (r == true) {
		window.location.href="#"
		} else {

		}
	}
</script>


<script>
    var table = document.querySelector("table")
    //模拟后台响应的数据
    var json = [{
        "nid": "1",
        "Chinese": "java核心技术1",
        "English": "120"

    }, {
        "nid": "2",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "3",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "4",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "5",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "6",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "7",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "8",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "9",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "10",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "11",
        "Chinese": "java核心技术1",
        "English": "120"

    },{
        "nid": "12",
        "Chinese": "java核心技术1",
        "English": "120"

    }];
    var ul = document.querySelector(".pagination");
    var page_number = 10; //单页浏览的条数
    var Total_pages; //页数
    var liAll; //页码按钮下标为 1到length-2是页数 0和length-1为上一页和下一页
    var pre; //上一页
    var next; //下一页

    function clearTable() {
        table.innerHTML = `
        <tbody>
             <tr>
                 <th style="width: 50px">#</th>
                    <th style="width:400px">原文</th>
          <th style="width: 400px">译文</th>
          <th style="width: 140px">操作</th>
            </tr>
        </tbody>
        `
    }
    window.onload = function() {
        json.forEach(function(item, i) {
            var tbody = document.querySelector("tbody");
            if (i < page_number) {
                var tr = document.createElement("tr");
                tr.innerHTML = `
                            <td style="width: 50px">${item.nid}</td>
                            <td style="width: 400px">${item.Chinese}</td>
                            <td style="width: 400px">${item.English}</td>
                            <td style="width:140px">
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC">更新</button>
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC" onclick="openwindow()">删除</button>
          </td>
                            `
                tbody.appendChild(tr);
            }

        })

        var len = json.length; //总记录条数

        Total_pages = len % page_number == 0 ? len / page_number : len / page_number + 1; //页数

        for (var i = 1; i <= Total_pages; i++) {
            ul.innerHTML += `
            <li  id="${i}"><a href="#">${i}</a></li>
            `
        }

        ul.innerHTML += `
                <li id="next">
                    <a href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
        `;
        liAll = document.querySelectorAll("li");

        // console.log([liAll])
        var pagethis = 1; //当前是第几页
        for (var i = 1; i < liAll.length - 1; i++) {
            liAll[i].onclick = function() {
                for (var j = 1; j < liAll.length - 1; j++) {

                }
                pagethis = this.id; //获取当前是第几页

                // console.log(liAll[i])
                let start; //当页数据的起始下标
                let end; //当页数据的结束下标
                if (pagethis != 1) {
                    start = (pagethis - 1) * page_number;
                    end = start + page_number;
                    if (end > json.length - 1) { //如果当页数据结束值大于总数据条数下标的值则赋值为总数据条数最大下标值
                        end = json.length - 1;
                    }
                } else {
                    start = 0;
                    end = page_number - 1;
                }

                clearTable();
                var tbody = document.querySelector("tbody");
                json.forEach(function(item, i) {

                    if (i >= start && i <= end) {
                        var tr = document.createElement("tr");
                        tr.innerHTML = `
                            <td style="width: 50px">${item.nid}</td>
                            <td style="width: 400px">${item.Chinese}</td>
                            <td style="width: 400px">${item.English}</td>
                            <td style="width:140px">
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC">更新</button>
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC" onclick="openwindow()">删除</button>
          </td>
                            `
                        tbody.appendChild(tr);
                    }
                })

            }
        }
        pre = document.querySelector("#pre") //上一页
        next = document.querySelector("#next") //下一页
        pre.onclick = function() {

            if (pagethis != 1) { //当前页数不等于1时执行上一页
                pagethis--;
                for (var j = 1; j < liAll.length - 1; j++) {

                }

                let start;
                let end;
                if (pagethis != 1) {
                    start = (pagethis - 1) * page_number;
                    end = start + page_number;
                    if (end > json.length - 1) {
                        end = json.length - 1;
                    }
                } else {
                    start = 0;
                    end = page_number - 1;
                }

                clearTable();
                var tbody = document.querySelector("tbody");
                json.forEach(function(item, i) {
                    if (i >= start && i <= end) {
                        var tr = document.createElement("tr");
                        tr.innerHTML = `
                             <td style="width: 50px">${item.nid}</td>
                            <td style="width: 400px">${item.Chinese}</td>
                            <td style="width: 400px">${item.English}</td>
                            <td style="width:140px">
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC">更新</button>
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC" onclick="openwindow()">删除</button>
          </td>
                            `
                        console.log(tr)
                        tbody.appendChild(tr);
                    }
                })
            }
        }
        next.onclick = function() {
            // alert(pagethis)
            if (pagethis < liAll.length - 2) { //当前页数小于最后一页则执行下一页
                pagethis++;
                for (var j = 1; j < liAll.length - 1; j++) {

                }

                let start;
                let end;
                if (pagethis != 1) {
                    start = (pagethis - 1) * page_number;
                    end = start + page_number;
                    if (end > json.length - 1) {
                        end = json.length - 1;
                    }
                } else {
                    start = 0;
                    end = page_number - 1;
                }

                clearTable();
                var tbody = document.querySelector("tbody");
                json.forEach(function(item, i) {
                    if (i >= start && i <= end) {
                        var tr = document.createElement("tr");
                        tr.innerHTML = `
                             <td style="width: 50px">${item.nid}</td>
                            <td style="width: 400px">${item.Chinese}</td>
                            <td style="width: 400px">${item.English}</td>
                            <td style="width:140px">
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC">更新</button>
              <button type="button" class="btn btn-default btn-sm" style="width:50px;height:25px;background-color:#DCDCDC" onclick="openwindow()">删除</button>
          </td>
                            `
                        console.log(tr)
                        tbody.appendChild(tr);
                    }
                })
            }
        }

    }
</script>
</html>